<th:block th:fragment="meal-record-nutrition-modal">
    <!-- ✅ 전체를 form으로 감싸서 POST 전송 -->
    <form th:action="@{/meal/record}" method="post" class="modal fade" id="nutritionModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="meal-record-modal-content modal-content">
                <div class="meal-record-modal-header modal-header d-flex justify-content-between align-items-center">
                    <!-- ✅ 음식 이름 -->
                    <h5 class="meal-record-modal-title modal-title" id="modalFoodName"></h5>
                    <!-- ✅ 즐겨찾기 버튼 -->
                    <button id="modalFavoriteBtn" class="btn btn-outline-warning ms-2" type="button" title="즐겨찾기">
                        <i class="bi bi-star"></i>
                    </button>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="meal-record-modal-body modal-body">
                    <!-- ✅ 섭취량 입력 -->
                    <div class="mb-3">
                        <label class="meal-record-form-label form-label">섭취량 (g)</label>
                        <input type="number" id="modalGramInput" class="meal-record-input form-control"
                               name="customServing" value="100" min="1" required>
                    </div>

                    <!-- ✅ Hidden Inputs -->
                    <input type="hidden" name="foodId" id="modalFoodId">
                    <input type="hidden" name="mealTime" id="modalMealTime">

                    <!-- ✅ 영양소 정보 -->
                    <div id="modalNutritionInfo">
                        <p>열량: <span id="modalKcal"></span> kcal</p>
                        <p>탄수화물: <span id="modalCarb"></span> g</p>
                        <p>당류: <span id="modalSugars"></span> g</p>
                        <p>당알콜: <span id="modalSugarAlcohol"></span> g</p>
                        <p>식이섬유: <span id="modalFiber"></span> g</p>
                        <p>단백질: <span id="modalProtein"></span> g</p>
                        <p>지방: <span id="modalFat"></span> g</p>
                        <p>포화지방: <span id="modalSatFat"></span> g</p>
                        <p>트랜스지방: <span id="modalTransFat"></span> g</p>
                        <p>콜레스테롤: <span id="modalCholesterol"></span> mg</p>
                        <p>불포화지방산: <span id="modalUnsatFat"></span> g</p>
                        <p>나트륨: <span id="modalSodium"></span> mg</p>
                        <p>카페인: <span id="modalCaffeine"></span> mg</p>
                        <p>칼슘: <span id="modalCalcium"></span> mg</p>
                    </div>
                </div>

                <div class="meal-record-modal-footer modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                    <button type="submit" class="btn btn-primary" id="modalConfirmBtn">추가</button>
                </div>
            </div>
        </div>
    </form>
</th:block>
