<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>오늘의 식단 기록</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .meal-card {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }
        .meal-image {
            max-width: 80px;
            border-radius: 8px;
        }
        .macro-color-carb { color: #ffc107; }
        .macro-color-fat { color: #20c997; }
        .macro-color-protein { color: #6f42c1; }
        .nutrient-flex {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
        }
        .chart-container {
            flex: 0 0 auto;
            width: 300px;
        }
        .table-container {
            flex: 1 1 0;
            min-width: 250px;
        }
        #macroChart {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body class="bg-light">

<div class="container my-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <button class="btn btn-outline-primary btn-sm">&lt; 이전</button>
        <h3>오늘</h3>
        <button class="btn btn-outline-primary btn-sm">다음 &gt;</button>
    </div>

    <div class="alert alert-warning d-flex align-items-center" role="alert">
        <div>⚠️ 200 칼로리</div>
    </div>

    <h5 class="mb-3">식사</h5>

    <!-- 아침 -->
    <div class="meal-card d-flex align-items-center">
        <div class="form-check me-2">
            <input class="form-check-input meal-check" type="checkbox" value="아침" id="breakfast">
        </div>
        <img src="https://via.placeholder.com/80x80" alt="아침" class="meal-image me-3" />
        <div>
            <div class="fw-bold">아침</div>
            <div class="text-muted">70 칼로리</div>
            <div class="text-primary">시금치, 햄, 계란 아침 머핀 (1인분)</div>
        </div>
    </div>

    <!-- 점심 -->
    <div class="meal-card d-flex align-items-center">
        <div class="form-check me-2">
            <input class="form-check-input meal-check" type="checkbox" value="점심" id="lunch">
        </div>
        <img src="https://via.placeholder.com/80x80" alt="점심" class="meal-image me-3" />
        <div>
            <div class="fw-bold">점심</div>
            <div class="text-muted">53 칼로리</div>
            <div class="text-primary">오이 샐러드 (1인분)</div>
        </div>
    </div>

    <!-- 저녁 -->
    <div class="meal-card d-flex align-items-center">
        <div class="form-check me-2">
            <input class="form-check-input meal-check" type="checkbox" value="저녁" id="dinner">
        </div>
        <img src="https://via.placeholder.com/80x80" alt="저녁" class="meal-image me-3" />
        <div>
            <div class="fw-bold">저녁</div>
            <div class="text-muted">76 칼로리</div>
            <div class="text-primary">케일 수프 (1인분)</div>
        </div>
    </div>

    <!-- 간식 -->
    <div class="meal-card d-flex align-items-center">
        <div class="form-check me-2">
            <input class="form-check-input meal-check" type="checkbox" value="간식" id="snack">
        </div>
        <div>
            <div class="fw-bold">간식</div>
            <div class="text-muted">계획된 음식 없음</div>
        </div>
    </div>

    <button id="saveMeals" class="btn btn-primary mt-3">기록하기</button>

    <h5 class="mt-5">영양물 섭취</h5>

    <div class="nutrient-flex mt-3">
        <div class="chart-container">
            <canvas id="macroChart"></canvas>
        </div>
        <div class="table-container">
            <div class="alert alert-warning" role="alert">
                일부 목표는 달성되지 않았습니다
            </div>

            <table class="table table-sm">
                <thead>
                <tr>
                    <th>영양소</th>
                    <th>합계</th>
                    <th>목표</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>칼로리</td>
                    <td>200</td>
                    <td>200</td>
                </tr>
                <tr>
                    <td><span class="macro-color-carb">탄수화물</span></td>
                    <td>23.6g</td>
                    <td>0 - 40g</td>
                </tr>
                <tr>
                    <td><span class="macro-color-fat">지방</span></td>
                    <td>6g</td>
                    <td>3 - 18g</td>
                </tr>
                <tr>
                    <td><span class="macro-color-protein">단백질</span></td>
                    <td>13.4g</td>
                    <td>1 - 15g</td>
                </tr>
                <tr>
                    <td>섬유</td>
                    <td>6g</td>
                    <td>25g</td>
                </tr>
                <tr>
                    <td>나트륨</td>
                    <td>1150mg</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>콜레스테롤</td>
                    <td>102mg</td>
                    <td>-</td>
                </tr>
                </tbody>
            </table>

            <button class="btn btn-outline-secondary btn-sm">
                자세한 영양 정보
            </button>
        </div>
    </div>
</div>

<script>
    // Chart.js Pie Chart
    const ctx = document.getElementById('macroChart').getContext('2d');
    new Chart(ctx, {
        type: 'pie',
        data: {
            labels: ['Fat', 'carbohydrateG', 'Protein'],
            datasets: [{
                data: [27, 47, 27],
                backgroundColor: [
                    '#20c997',
                    '#ffc107',
                    '#6f42c1'
                ],
            }]
        },
        options: {
            plugins: {
                legend: {
                    position: 'bottom'
                }
            }
        }
    });

    // 기록하기 버튼 클릭 이벤트
    document.getElementById('saveMeals').addEventListener('click', () => {
        const checkedMeals = [];
        document.querySelectorAll('.meal-check').forEach(cb => {
            if (cb.checked) {
                checkedMeals.push(cb.value);
            }
        });

        if (checkedMeals.length > 0) {
            alert("기록했습니다: " + checkedMeals.join(', '));
            console.log("선택된 식사:", checkedMeals);
        } else {
            alert("기록할 식사를 선택하세요.");
        }
    });
</script>

</body>
</html>
