<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{/layout/base}"
      th:with="menu='posts'">

<head>
    <title layout:fragment="title">음식 검색 및 기록</title>

    <th:block layout:fragment="css">
        <link rel="stylesheet" th:href="@{/css/record-food-search.css}">
    </th:block>
</head>

<div layout:fragment="content">
    <div class="record-food-search-container container my-4">
        <!-- 탭 -->
        <ul class="record-food-search-tab-nav nav nav-tabs mb-3" id="tabMenu" role="tablist">
            <li class="record-food-search-tab-item nav-item">
                <button class="record-food-search-tab-button nav-link active" id="tab-all" data-bs-toggle="tab" data-bs-target="#pane-all" type="button" role="tab">전체</button>
            </li>
            <li class="record-food-search-tab-item nav-item">
                <button class="record-food-search-tab-button nav-link" id="tab-frequent" data-bs-toggle="tab" data-bs-target="#pane-frequent" type="button" role="tab">자주 먹는 음식</button>
            </li>
            <li class="record-food-search-tab-item nav-item">
                <button class="record-food-search-tab-button nav-link" id="tab-favorite" data-bs-toggle="tab" data-bs-target="#pane-favorite" type="button" role="tab">즐겨찾기</button>
            </li>
            <li class="record-food-search-tab-item nav-item">
                <button class="record-food-search-tab-button nav-link" id="tab-manual" data-bs-toggle="tab" data-bs-target="#pane-manual" type="button" role="tab">직접 등록</button>
            </li>
        </ul>

        <!-- 검색 -->
        <div class="record-food-search-input-group input-group mb-3">
            <input type="text" id="searchInput" class="record-food-search-input form-control" placeholder="고구마, 닭가슴살...">
            <button class="record-food-search-search-btn btn btn-outline-secondary" id="clearBtn">검색</button>
        </div>

        <!-- 탭 내용 -->
        <div class="record-food-search-tab-content tab-content">
            <div class="record-food-search-tab-pane tab-pane fade show active" id="pane-all" role="tabpanel">
                <ul class="record-food-search-result-list list-group" id="resultList-all"></ul>
            </div>
            <div class="record-food-search-tab-pane tab-pane fade" id="pane-frequent" role="tabpanel">
                <ul class="record-food-search-result-list list-group" id="resultList-frequent"></ul>
            </div>
            <div class="record-food-search-tab-pane tab-pane fade" id="pane-favorite" role="tabpanel">
                <ul class="record-food-search-result-list list-group" id="resultList-favorite"></ul>
            </div>
            <div class="record-food-search-tab-pane tab-pane fade" id="pane-manual" role="tabpanel">
                <div class="record-food-search-manual-tip mb-2">
                    <div class="d-flex justify-content-start align-items-center gap-2">
                        <span class="text-muted mb-0">찾는 음식이 없나요?</span>
                        <button class="record-food-search-manual-btn btn btn-sm btn-primary" id="openManualModalBtn">직접 등록</button>
                    </div>
                </div>
                <ul class="record-food-search-result-list list-group" id="resultList-manual"></ul>
            </div>
        </div>

        <!-- 하단 고정 바 -->
        <div class="record-food-search-fixed-bottom fixed-bottom-bar d-flex align-items-center justify-content-between gap-2">
            <select id="mealSelect" class="record-food-search-meal-select form-select w-auto">
                <option value="아침">아침</option>
                <option value="점심">점심</option>
                <option value="저녁">저녁</option>
                <option value="간식">간식</option>
            </select>
            <span>에</span>
            <button id="saveBtn" class="record-food-search-save-btn btn btn-primary flex-grow-1" disabled>기록하기</button>
        </div>

        <!-- fragment import -->
        <div th:replace="fragments/record-food-search-nutrition-modal :: record-food-search-nutrition-modal"></div>
        <div th:replace="fragments/record-food-search-manual-food-modal :: record-food-search-manual-food-modal"></div>
    </div>
</div>

<th:block layout:fragment="script">
    <script th:src="@{/js/record-food-search.js}"></script>
</th:block>

</html>
