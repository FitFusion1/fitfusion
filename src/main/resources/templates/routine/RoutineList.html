<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{/layout/base}" th:with="menu='posts'">
<head>
    <title layout:fragment="title">운동 루틴</title>
    <th:block layout:fragment="css">
        <link rel="stylesheet" th:href="@{/css/Exercise.css}"/>
    </th:block>
</head>

<div layout:fragment="content">
<div class="RoutineList-container">
    <h1 class="RoutineList-title">나의 운동 루틴</h1>

    <button class="RoutineList-addButton custom-create"
            th:onclick="'location.href=\\'/routine/create/custom\\''">+ 나만의 루틴 생성하기</button>
    <button class="RoutineList-addButton ai-create"
            th:onclick="'location.href=\\'/routine/create/ai\\''">+ AI 루틴 생성하기</button>

    <div class="RoutineList-grid">
        <div class="RoutineList-card" th:each="routine : ${routines}"
             th:onclick="|location.href='/routine/detail?id=' + [[${routine.routineId}]]|">
            <div class="RoutineList-cardTitle" th:text="${routine.routineName}">루틴 이름</div>
            <span class="RoutineList-tag" th:text="${routine.targetPart}">카테고리</span>
            <span class="RoutineList-tag" th:text="${routine.difficulty}">난이도</span>
            <span class="RoutineList-tag" th:text="${routine.totalTime}">예상 평균 운동시간</span>
            <div class="RoutineList-meta" th:text="${routine.summary}">운동 요약</div>
            <div class="RoutineList-buttonGroup">
                <form th:action="@{/routine/execute}" method="get">
                    <input type="hidden" th:value="${routine.routineId}" name="routineId"/>
                    <button class="RoutineList-button RoutineList-start">수행</button>
                </form>
                <form th:action="@{/routine/update}" method="get">
                    <input type="hidden" th:value="${routine.routineId}" name="routineId"/>
                    <button class="RoutineList-button RoutineList-edit">수정</button>
                </form>
                <form th:action="@{/routine/delete}" method="post">
                    <input type="hidden" th:value="${routine.routineId}" name="routineId"/>
                    <button class="RoutineList-button RoutineList-delete">삭제</button>
                </form>
            </div>
        </div>

        <div class="RoutineList-card" onclick="location.href='/myexercise/routinedetail'">
            <div class="RoutineList-cardTitle">상체 벌크업 루틴</div>
            <span class="RoutineList-tag">상체</span>
            <span class="RoutineList-tag">어려움</span>
            <span class="RoutineList-tag">50분</span>
            <div class="RoutineList-meta">벤치프레스, 풀업, 숄더프레스 포함</div>
            <div class="RoutineList-buttonGroup">
                <button class="RoutineList-button RoutineList-start">수행</button>
                <button class="RoutineList-button RoutineList-edit">수정</button>
                <button class="RoutineList-button RoutineList-delete">삭제</button>
            </div>
        </div>

        <div class="RoutineList-card" onclick="location.href='/myexercise/routinedetail'">
            <div class="RoutineList-cardTitle">전신 유산소 루틴</div>
            <span class="RoutineList-tag">전신</span>
            <span class="RoutineList-tag">쉬움</span>
            <span class="RoutineList-tag">30분</span>
            <div class="RoutineList-meta">버피, 점핑잭, 플랭크 포함</div>
            <div class="RoutineList-buttonGroup">
                <button class="RoutineList-button RoutineList-start">수행</button>
                <button class="RoutineList-button RoutineList-edit">수정</button>
                <button class="RoutineList-button RoutineList-delete">삭제</button>
            </div>
        </div>
    </div>
</div>
</div>
<script>
    // 이벤트 버블링 방지
    document.addEventListener('DOMContentLoaded', function () {
        const buttons = document.querySelectorAll('.RoutineList-button');
        buttons.forEach(button => {
            button.addEventListener('click', function (event) {
                event.stopPropagation(); // 카드 클릭 이벤트 중단
                // 실제 기능 (예: 수행, 수정, 삭제)을 여기에 구현
                console.log(`${event.target.innerText} 버튼 클릭됨`);
            });
        });
    });
</script>
</html>
